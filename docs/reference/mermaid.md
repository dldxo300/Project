graph TD
    subgraph "1. 사용자 온보딩 및 둘러보기"
        A[사용자 웹사이트 방문] --> B{마켓플레이스 둘러보기};
        B --> C{원하는 활동 선택};
        C -- 주문제작 하고 싶음 --> D[주문제작 페이지 이동];
        C -- 기성품 구매/문의 하고 싶음 --> E[상품 상세 페이지 이동];
        D --> F[Clerk 회원가입/로그인];
        E --> F;
        F --> G([사용자 Profiles 데이터 생성]);
    end

    subgraph "2. 주문제작(Custom Order) 프로세스"
        G --> H[주문제작 의뢰서 작성 <br/>(이미지 업로드, 요구사항 입력)];
        H --> I(의뢰서 제출);
        I --> J[상태: 검토 대기 <br/>(custom_orders 테이블 생성)];
        J --> K[관리자: 내용 검토 및 견적 제공];
        K --> L{사용자: 견적 확인 및 수락?};
        L -- Yes --> M[결제 진행 (Toss Payments)];
        L -- No --> N[상태: 주문 취소];
        M --> O{결제 성공?};
        O -- Yes --> P[상태: 제작 중];
        P --> Q[관리자/작가: 제작 진행 및 소통];
        Q --> R[상태: 제작 완료 → 배송 중 → 배송 완료];
        R --> S{관리자: 완성작을 마켓 상품으로 등록?};
        S -- Yes --> T([신규 Product 데이터 생성]);
        S -- No --> U[주문 최종 완료];
        T --> U;
    end

    subgraph "3. 마켓플레이스 상품 구매 프로세스"
        G --> V[마켓플레이스 상품 탐색 및 선택];
        V --> W{상품 상세 페이지 활동};
        W -- 상품 문의하기 --> X[QnA 질문 작성];
        W -- 리뷰 보기 --> Y[다른 사용자 리뷰 확인];
        W -- 구매하기 --> Z[장바구니에 상품 추가 <br/>(cart_items 테이블)];
        X --> W;
        Y --> W;
        Z --> AA[장바구니 확인 및 주문 계속];
        AA --> BB[배송 정보 입력];
        BB --> CC[결제 진행 (Toss Payments)];
        CC --> DD{결제 성공?};
        DD -- Yes --> EE([orders & order_items 데이터 생성]);
        EE --> FF[상태: 결제완료 → 배송준비중 → 배송중 → 배송완료];
        FF --> GG{수령 후 리뷰 작성?};
        GG -- Yes --> HH[리뷰 작성 페이지 이동 <br/>(reviews 테이블 생성)];
        GG -- No --> II[구매 최종 완료];
        HH --> II;
    end